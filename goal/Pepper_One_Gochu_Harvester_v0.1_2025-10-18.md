# Pepper One — 성숙 고추 자동 수확 시스템 (v0.1)
_“복잡함은 우리가, 단순함은 사용자에게.”_  
작성일: 2025-10-18

---

## 목차
- [비전](#비전)
- [제품 철학](#제품-철학-3가지)
- [시스템 개요](#시스템-개요)
- [하드웨어 구성](#하드웨어-구성)
- [소프트웨어·알고리즘](#소프트웨어알고리즘)
- [목표 스펙 (1세대)](#목표-스펙1세대)
- [BOM 원가 추정 (₩50M 언더 목표)](#bom-원가-추정-₩50m-언더-목표)
- [혁신 포인트](#혁신-포인트)
- [운용 시나리오](#운용-시나리오)
- [리스크 레지스터](#리스크-레지스터)
- [KPI 대시보드](#kpi-대시보드)
- [출시 로드맵 (6주 가속)](#출시-로드맵-6주-가속)
- [현장 파일럿 체크리스트](#현장-파일럿-체크리스트)
- [데이터셋 수집 계획](#데이터셋-수집-계획)
- [시뮬레이션 태스크 파라미터](#시뮬레이션-태스크-파라미터)
- [특허·차별화 아이디어](#특허차별화-아이디어)
- [운영·유지보수](#운영유지보수)
- [개선 이력 (Changelog)](#개선-이력-changelog)

---

## 비전
고추를 ‘수확’하는 로봇이 아니라, 농장의 ‘시간’을 되돌려주는 **운영체제**.
오늘은 고추, 내일은 토마토·파프리카. **엔드이펙터만 교체**하면 소프트웨어는 그대로.

## 제품 철학 (3가지)
1. **한 버튼**: 전원 켜고 *Start*. 나머지는 자동.
2. **엔드투엔드**: 인지 → 결정 → 수확 → 이송 → 상자 적재까지 하나의 통합 제품.
3. **사람 중심**: 농부는 정비사가 아니다. 모듈은 마그세이프처럼 “딱” 끼우고 끝.

## 시스템 개요
- **모바일 베이스**: 노지/하우스 겸용 저속 전동 크롤러(경사 10°), 650~800mm 가변 트랙폭.
- **듀얼 픽킹 암(셀 구조)**: 좌/우 독립 2암 기본, 3암 옵션. 6DoF 협동형.
- **하이브리드 픽커(엔드이펙터)**: 소프트컵 흡착 → 회전 컵 + V-컷터로 절단/비틀어 분리 → 미니 컨베이어 버퍼로 상단 수집함 이송.
- **시각·조명**: RGB 스테레오 + 단일 ToF + **교차편광 LED 링** + 근적외 조명.
- **온보드 컴퓨팅**: Orin-클래스 엣지 GPU 또는 x86+소형 dGPU, 듀얼 부팅(안정/실험).
- **안전·내환경**: IP54, 토크 제한, 소프트 커버, 비상 스톱 듀얼 회로.

## 하드웨어 구성
- **모바일 베이스**: 저속 고토크 구동, IMU+휠 오도메트리, 라이다/초음파 전방 감지(옵션).
- **암(Arm)**: 6DoF, 하모닉/사이클로 감속기 혼합, 토크 센싱, 모듈형 케이블 라우팅(내부화).
- **엔드이펙터**: 소프트컵+회전 컵(120~220°) + V-컷터, 힘/토크 클로즈드루프, 교체형 카트리지(볼트 2개).
- **컨베이어 버퍼**: 충격 흡수 패드, 낙하 방지 가이드, 박스 적재 높이 자동 보정.
- **광학 모듈**: 엔드이펙터 eye-in-hand 카메라 보조 탑재, 자동 와이핑·안티포그·하이드로포빅 코팅.

## 소프트웨어·알고리즘
- **인지 파이프라인**: 과실·줄기 분절 → 관계 그래프 구성 → **절단점 후보** 예측.
- **행동 매크로**: 리프팅 → 분리 → 절단(품종 모드) + 잎 가림 시 **미세 리프터** 2초 한정 사용.
- **작업 계획**: 행(row) 단위 SLAM 지도, 과실 클러스터 우선순위(거리×숙성×접근성 스코어).
- **학습 루프**: Isaac Sim 도메인 랜덤 + 실데이터 역라벨 합성. 현장 수집 → 야간 AutoTrain → 아침 델타 배포.
- **UX**: “Start / Pause / Box Full / Go Home” 4버튼. 경고는 자연어로: _“왼쪽 렌즈에 물방울이 있어요. 6초 후 자동 청소합니다.”_

## 목표 스펙(1세대)
| 항목 | 목표 |
|---|---|
| 성숙·비숙성 분류 정밀도 | 맑음 95%+, 비/안개 92% |
| 속도(과실/암) | 평균 8–12초 → 300–450개/시간/암 |
| 총 처리량(듀얼 암) | **600–900개/시간** |
| 손상률 | ≤ 1.5% |
| 자율 주행 | 직선행 추종, 사람/장애물 감지 정지, 회차 반수동 |
| 배터리 | 4–6시간, 모듈식 팩 스왑 |

## BOM 원가 추정 (₩50M 언더 목표)
| 모듈 | 원가(백만 원) | 비고 |
|---|---:|---|
| 전동 크롤러/구동부 | 8–10 | 프레임·서스 포함 |
| 듀얼 암(감속/모터/엔코더) | 10–12 | 6DoF×2 |
| 엔드이펙터×2 | 3–4 | 회전컵+V-컷터 |
| 센서 패키지 | 3–4 | RGB/ToF/편광/IR |
| 컴퓨팅(메인+MCU) | 2–3 | Orin or x86+dGPU |
| 배터리·전장·하우징 | 4–5 | IP54 |
| 안전/통신/조립/QA | 5–6 | 인증 포함 |
| **합계** | **35–44** | **판매가 49.9 가정** |

## 혁신 포인트
- **하드웨어 최소주의**: 거대한 팔 대신 **똑똑한 픽커**로 편차 흡수.
- **광학 우선 전략**: 교차편광·근적외로 반사/물기/역광을 제압 → 단순한 모델로 높은 신뢰도.
- **셀 확장성**: 듀얼 → 트리플 암 업그레이드가 플러그인처럼.
- **밤새 학습·아침 배포**: 농가 리듬에 맞춘 데이터 네이티브 운영.

## 운용 시나리오
- **하우스**: 레일 옵션 또는 협폭 크롤러. 일정 조도 → 최고 효율.
- **노지**: 요철/잡초/역광. 편광 조명 + 로우기어 크롤러 + 캐노피 높이 템플릿.

## 리스크 레지스터
| 리스크 | 가능성 | 영향 | 대응 |
|---|:--:|:--:|---|
| 심한 가림(occlusion) | 중 | 중 | 잎 리프터, 다각도 재관찰, 건너뛰기 큐 |
| 품종별 줄기 강성 편차 | 중 | 중 | 회전각/토크 자동 스캔, 절단점 보정 |
| 비·습기·이슬 | 중 | 중 | 발열 디포그, 코팅, 자동 와이핑 |
| 현장 유지보수 난이도 | 저 | 고 | 카트리지형 엔드이펙터(5분 교체) |
| 데이터 편향 | 중 | 중 | 편광 on/off·역광·비산수 포함 수집 프로토콜 |

## KPI 대시보드
- **정확도**(숙성/비숙성), **수확 속도**(개/시간/암), **손상률**, **가동률(%)**, **에러 빈도**(원인별), **배터리 교체 주기**, **렌즈 청소 주기**.
- 릴리즈마다 목표: `정확도 +1%p`, `속도 -1초`, `손상률 -0.2%p`.

## 출시 로드맵 (6주 가속)
- **주1–2: 엔드이펙터 알파** — 회전컵+V-컷터 시제품, 데스크 리그 절단력/토크 테이블 작성.
- **주3–4: 싱글 암 카트** — 반자율 픽킹 데모(성숙 판정 93%+), 시야 가림 대응 확인.
- **주5: 듀얼 암 & 미니 컨베이어** — 동시 작업 충돌 회피, 박스 적재까지 E2E.
- **주6: 노지 파일럿** — 비/안개 모드, KPI(정확도/속도/손상률) 리그레션 통과 시 베타 태깅.

## 현장 파일럿 체크리스트
- [ ] 파일럿 농가 계약(데이터 사용 동의 포함)
- [ ] 안전 교육/보험 확인, 비상 정지 절차 리허설
- [ ] 광학 모듈 청정도/코팅 상태 확인
- [ ] 배터리 팩 예비 2세트, 현장 교체 툴
- [ ] 네트워킹(로컬 AP) 및 야간 조도 점검
- [ ] KPI 측정 폼(구글폼/로컬 앱) 준비

## 데이터셋 수집 계획
- **목표 5,000장**: 편광 on/off, 물방울 스프레이, 역광/그늘, 품종 다양성.
- **라벨링**: 과실/줄기/절단점, 가림 수준(라벨), 수확 결과(성공/실패/손상).  
- **운영**: 현장 테더링 수집 → 밤새 AutoTrain → 아침 업데이트(델타).

## 시뮬레이션 태스크 파라미터
- 줄기 강성/굵기/각도, 잎 가림 비율, 과실 질량·마찰, 절단 저항, 조도/반사/물방울 도메인 랜덤.
- 정책: MLP + 힘제어(임피던스), “리프팅→분리→절단” 3단계 보상 설계.

## 특허·차별화 아이디어
- 회전컵–V-컷터 하이브리드 + 힘/토크 적응 제어 로직.
- 교차편광–근적외 듀얼 조명 기반 성숙 판정 파이프라인.
- 잎 리프터 미세 조작 시나리오(2초 제한, 비가시 영역 우회).
- 과실 클러스터 큐 기반 듀얼 암 동적 할당·충돌 회피.

## 운영·유지보수
- **렌즈는 항상 깨끗해야 한다**: 더러우면 수확 중지→자동 청소→재개.
- 소음 저감 및 정상음 패턴 학습(원격 헬스 모니터링).
- 모든 하네스 내부 라우팅, 현장 훼손 0.
- UX는 한글 우선, 코드 대신 자연어 경고.

---

## 개선 이력 (Changelog)
- v0.1 (2025-10-18): 초기 아키텍처/스펙/BOM/로드맵/체크리스트 정리.
- v0.2 (TBD): 파일럿 결과 반영, KPI 업데이트, 엔드이펙터 카트리지 표준화.

---

### 다음 단계 (즉시 실행)
1. **픽커 알파 제작**: 3D 프린트 컵/가드, 미니 BLDC+감속, 나이프 모듈.
2. **데스크 리그**: 고정 지그로 절단 토크/각·손상률 계측.
3. **데이터 5,000장**: 편광/역광/습기 조건 포함 수집.
4. **Isaac 태스크 구축**: 가림·강성 랜덤화, 보상 설계 튜닝.
5. **파일럿 섭외**: KPI 측정·피드백 루프 계약.

---

> 이 문서는 **가시화·업그레이드**를 위한 기준점입니다. 각 릴리즈마다 KPI와 리스크 레지스터를 업데이트하고, 체크리스트를 실행하며 목표를 끌어당깁니다.