<?xml version="1.0"?>
<!-- 
  RoArm-M3 URDF - Waveshare Wiki 스펙 기반
  작성일: 2025-10-17
  출처: https://www.waveshare.com/wiki/RoArm-M3
  
  DOF: 5+1 (5 joints + 1 gripper)
  작업 공간: 직경 1m
  유효 하중: 0.2kg @ 0.5m
  
  Joint 범위:
  - Base (Joint 1): 360° (±π rad)
  - Shoulder (Joint 2): 180° (±1.57 rad)  
  - Elbow (Joint 3): 180° (±1.57 rad)
  - Wrist1 (Joint 4): 180° (±1.57 rad)
  - Wrist2 (Joint 5): 360° (±π rad)
  - Gripper: 135° (1.08 ~ 3.14 rad)
-->
<robot name="roarm_m3">

  <!-- ==================== Materials ==================== -->
  <material name="black">
    <color rgba="0.1 0.1 0.1 1.0"/>
  </material>
  
  <material name="dark_grey">
    <color rgba="0.3 0.3 0.3 1.0"/>
  </material>
  
  <material name="light_grey">
    <color rgba="0.7 0.7 0.7 1.0"/>
  </material>
  
  <material name="blue">
    <color rgba="0.2 0.4 0.8 1.0"/>
  </material>
  
  <material name="orange">
    <color rgba="1.0 0.5 0.0 1.0"/>
  </material>

  <!-- ==================== Base Link (고정) ==================== -->
  <link name="base_link">
    <inertial>
      <origin xyz="0 0 0.025" rpy="0 0 0"/>
      <mass value="0.5"/>
      <inertia ixx="0.001" ixy="0.0" ixz="0.0"
               iyy="0.001" iyz="0.0" izz="0.001"/>
    </inertial>
    
    <visual>
      <origin xyz="0 0 0.025" rpy="0 0 0"/>
      <geometry>
        <cylinder radius="0.06" length="0.05"/>
      </geometry>
      <material name="dark_grey"/>
    </visual>
    
    <collision>
      <origin xyz="0 0 0.025" rpy="0 0 0"/>
      <geometry>
        <cylinder radius="0.06" length="0.05"/>
      </geometry>
    </collision>
  </link>

  <!-- ==================== Joint 1: Base (360° 회전) ==================== -->
  <joint name="joint_1_base" type="continuous">
    <parent link="base_link"/>
    <child link="link_1"/>
    <origin xyz="0 0 0.05" rpy="0 0 0"/>
    <axis xyz="0 0 1"/>
    <limit effort="10.0" velocity="2.0"/>
    <dynamics damping="0.7" friction="0.5"/>
  </joint>

  <link name="link_1">
    <inertial>
      <origin xyz="0 0 0.04" rpy="0 0 0"/>
      <mass value="0.3"/>
      <inertia ixx="0.0008" ixy="0.0" ixz="0.0"
               iyy="0.0008" iyz="0.0" izz="0.0005"/>
    </inertial>
    
    <visual>
      <origin xyz="0 0 0.04" rpy="0 0 0"/>
      <geometry>
        <cylinder radius="0.05" length="0.08"/>
      </geometry>
      <material name="blue"/>
    </visual>
    
    <collision>
      <origin xyz="0 0 0.04" rpy="0 0 0"/>
      <geometry>
        <cylinder radius="0.05" length="0.08"/>
      </geometry>
    </collision>
  </link>

  <!-- ==================== Joint 2: Shoulder (180°, Dual-drive) ==================== -->
  <joint name="joint_2_shoulder" type="revolute">
    <parent link="link_1"/>
    <child link="link_2"/>
    <origin xyz="0 0 0.08" rpy="0 0 0"/>
    <axis xyz="0 1 0"/>
    <limit lower="-1.57" upper="1.57" effort="15.0" velocity="2.0"/>
    <dynamics damping="0.8" friction="0.6"/>
  </joint>

  <link name="link_2">
    <inertial>
      <origin xyz="0.12 0 0" rpy="0 0 0"/>
      <mass value="0.4"/>
      <inertia ixx="0.0005" ixy="0.0" ixz="0.0"
               iyy="0.002" iyz="0.0" izz="0.002"/>
    </inertial>
    
    <visual>
      <origin xyz="0.12 0 0" rpy="0 1.5708 0"/>
      <geometry>
        <cylinder radius="0.03" length="0.24"/>
      </geometry>
      <material name="orange"/>
    </visual>
    
    <collision>
      <origin xyz="0.12 0 0" rpy="0 1.5708 0"/>
      <geometry>
        <cylinder radius="0.03" length="0.24"/>
      </geometry>
    </collision>
  </link>

  <!-- ==================== Joint 3: Elbow (180°) ==================== -->
  <joint name="joint_3_elbow" type="revolute">
    <parent link="link_2"/>
    <child link="link_3"/>
    <origin xyz="0.24 0 0" rpy="0 0 0"/>
    <axis xyz="0 1 0"/>
    <limit lower="-1.57" upper="1.57" effort="10.0" velocity="2.5"/>
    <dynamics damping="0.7" friction="0.5"/>
  </joint>

  <link name="link_3">
    <inertial>
      <origin xyz="0.09 0 0" rpy="0 0 0"/>
      <mass value="0.25"/>
      <inertia ixx="0.0003" ixy="0.0" ixz="0.0"
               iyy="0.0008" iyz="0.0" izz="0.0008"/>
    </inertial>
    
    <visual>
      <origin xyz="0.09 0 0" rpy="0 1.5708 0"/>
      <geometry>
        <cylinder radius="0.025" length="0.18"/>
      </geometry>
      <material name="blue"/>
    </visual>
    
    <collision>
      <origin xyz="0.09 0 0" rpy="0 1.5708 0"/>
      <geometry>
        <cylinder radius="0.025" length="0.18"/>
      </geometry>
    </collision>
  </link>

  <!-- ==================== Joint 4: Wrist1 (180°) ==================== -->
  <joint name="joint_4_wrist1" type="revolute">
    <parent link="link_3"/>
    <child link="link_4"/>
    <origin xyz="0.18 0 0" rpy="0 0 0"/>
    <axis xyz="0 1 0"/>
    <limit lower="-1.57" upper="1.57" effort="8.0" velocity="3.0"/>
    <dynamics damping="0.5" friction="0.3"/>
  </joint>

  <link name="link_4">
    <inertial>
      <origin xyz="0.04 0 0" rpy="0 0 0"/>
      <mass value="0.15"/>
      <inertia ixx="0.0001" ixy="0.0" ixz="0.0"
               iyy="0.0002" iyz="0.0" izz="0.0002"/>
    </inertial>
    
    <visual>
      <origin xyz="0.04 0 0" rpy="0 1.5708 0"/>
      <geometry>
        <cylinder radius="0.02" length="0.08"/>
      </geometry>
      <material name="orange"/>
    </visual>
    
    <collision>
      <origin xyz="0.04 0 0" rpy="0 1.5708 0"/>
      <geometry>
        <cylinder radius="0.02" length="0.08"/>
      </geometry>
    </collision>
  </link>

  <!-- ==================== Joint 5: Wrist2 (360°) ==================== -->
  <joint name="joint_5_wrist2" type="continuous">
    <parent link="link_4"/>
    <child link="link_5"/>
    <origin xyz="0.08 0 0" rpy="0 0 0"/>
    <axis xyz="1 0 0"/>
    <limit effort="5.0" velocity="3.5"/>
    <dynamics damping="0.3" friction="0.2"/>
  </joint>

  <link name="link_5">
    <inertial>
      <origin xyz="0.03 0 0" rpy="0 0 0"/>
      <mass value="0.1"/>
      <inertia ixx="0.00005" ixy="0.0" ixz="0.0"
               iyy="0.00008" iyz="0.0" izz="0.00008"/>
    </inertial>
    
    <visual>
      <origin xyz="0.03 0 0" rpy="0 1.5708 0"/>
      <geometry>
        <cylinder radius="0.018" length="0.06"/>
      </geometry>
      <material name="blue"/>
    </visual>
    
    <collision>
      <origin xyz="0.03 0 0" rpy="0 1.5708 0"/>
      <geometry>
        <cylinder radius="0.018" length="0.06"/>
      </geometry>
    </collision>
  </link>

  <!-- ==================== Joint 6: Gripper (135°) ==================== -->
  <joint name="joint_6_gripper" type="revolute">
    <parent link="link_5"/>
    <child link="gripper_base"/>
    <origin xyz="0.06 0 0" rpy="0 0 0"/>
    <axis xyz="0 0 1"/>
    <limit lower="1.08" upper="3.14" effort="5.0" velocity="3.0"/>
    <dynamics damping="0.2" friction="0.1"/>
  </joint>

  <link name="gripper_base">
    <inertial>
      <origin xyz="0.02 0 0" rpy="0 0 0"/>
      <mass value="0.08"/>
      <inertia ixx="0.00003" ixy="0.0" ixz="0.0"
               iyy="0.00004" iyz="0.0" izz="0.00003"/>
    </inertial>
    
    <visual>
      <origin xyz="0.02 0 0" rpy="0 0 0"/>
      <geometry>
        <box size="0.04 0.03 0.02"/>
      </geometry>
      <material name="dark_grey"/>
    </visual>
    
    <collision>
      <origin xyz="0.02 0 0" rpy="0 0 0"/>
      <geometry>
        <box size="0.04 0.03 0.02"/>
      </geometry>
    </collision>
  </link>

  <!-- ==================== Gripper Left Finger ==================== -->
  <joint name="gripper_left_joint" type="prismatic">
    <parent link="gripper_base"/>
    <child link="gripper_left_finger"/>
    <origin xyz="0.04 0 0" rpy="0 0 0"/>
    <axis xyz="0 1 0"/>
    <limit lower="0.0" upper="0.04" effort="5.0" velocity="0.5"/>
    <dynamics damping="0.1" friction="0.1"/>
  </joint>

  <link name="gripper_left_finger">
    <inertial>
      <origin xyz="0.015 0.015 0" rpy="0 0 0"/>
      <mass value="0.02"/>
      <inertia ixx="0.000005" ixy="0.0" ixz="0.0"
               iyy="0.000005" iyz="0.0" izz="0.000005"/>
    </inertial>
    
    <visual>
      <origin xyz="0.015 0.015 0" rpy="0 0 0"/>
      <geometry>
        <box size="0.03 0.008 0.015"/>
      </geometry>
      <material name="black"/>
    </visual>
    
    <collision>
      <origin xyz="0.015 0.015 0" rpy="0 0 0"/>
      <geometry>
        <box size="0.03 0.008 0.015"/>
      </geometry>
    </collision>
  </link>

  <!-- ==================== Gripper Right Finger ==================== -->
  <joint name="gripper_right_joint" type="prismatic">
    <parent link="gripper_base"/>
    <child link="gripper_right_finger"/>
    <origin xyz="0.04 0 0" rpy="0 0 0"/>
    <axis xyz="0 -1 0"/>
    <limit lower="0.0" upper="0.04" effort="5.0" velocity="0.5"/>
    <dynamics damping="0.1" friction="0.1"/>
    <mimic joint="gripper_left_joint" multiplier="1.0" offset="0.0"/>
  </joint>

  <link name="gripper_right_finger">
    <inertial>
      <origin xyz="0.015 -0.015 0" rpy="0 0 0"/>
      <mass value="0.02"/>
      <inertia ixx="0.000005" ixy="0.0" ixz="0.0"
               iyy="0.000005" iyz="0.0" izz="0.000005"/>
    </inertial>
    
    <visual>
      <origin xyz="0.015 -0.015 0" rpy="0 0 0"/>
      <geometry>
        <box size="0.03 0.008 0.015"/>
      </geometry>
      <material name="black"/>
    </visual>
    
    <collision>
      <origin xyz="0.015 -0.015 0" rpy="0 0 0"/>
      <geometry>
        <box size="0.03 0.008 0.015"/>
      </geometry>
    </collision>
  </link>

  <!-- ==================== Tool Center Point (TCP) ==================== -->
  <joint name="gripper_to_tcp" type="fixed">
    <parent link="gripper_base"/>
    <child link="tcp"/>
    <origin xyz="0.07 0 0" rpy="0 0 0"/>
  </joint>

  <link name="tcp">
    <!-- Virtual link for end-effector position -->
  </link>

</robot>
