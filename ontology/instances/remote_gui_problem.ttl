@prefix : <http://roarm.ai/ontology#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .

# 원격 GUI 렌더링 실패 문제
# 이전 프로젝트(codex_mcp)에서 발생한 MEDIUM 문제

# ============================================
# 1. 메인 문제 정의
# ============================================

:remote_gui_rendering_problem a :EnvironmentProblem , :Problem ;
  :id "PROB-003" ;
  :name "원격 GUI 렌더링 실패" ;
  :severity "MEDIUM" ;
  :priority 3 ;
  :status "OPEN" ;
  :occurrenceCount 1 ;
  :createdAt "2025-10-14T00:00:00Z"^^xsd:dateTime ;
  
  :symptom "원격 SSH 세션에서 Isaac Sim GUI 창은 뜨지만 내용이 비어 있음 (검은 화면/회색 화면)" ;
  :errorMessage "콘솔 로그는 정상 진행 (500스텝 완료, 보상 기록)" ;
  :description """
원격 X11 포워딩 시 OpenGL/Vulkan 컨텍스트가 로컬 GPU에서 
원격 디스플레이로 제대로 스트리밍되지 않음.

Isaac Sim의 Omniverse UI는 고성능 3D 렌더링을 요구하므로 
일반 X11 포워딩으로는 한계.

영향 범위:
- Headless 모드: 정상 동작 (영향 없음)
- 원격 GUI: 렌더링 실패 (시각적 확인 불가)
- 로컬 GUI: 정상 동작
  """ ;
  
  :causedBy :x11_forwarding_limitation ;
  
  :hasSolution :webrtc_streaming_solution ;
  :hasSolution :nice_dcv_solution ;
  :hasSolution :turbovnc_solution .

# ============================================
# 2. 근본 원인
# ============================================

:x11_forwarding_limitation a :SystemComponent ;
  :name "X11 포워딩의 OpenGL/Vulkan 한계" ;
  :description """
원격 X11 포워딩은 기본적으로 2D 그래픽 위주.
3D 가속 컨텍스트(OpenGL, Vulkan)는 네트워크로 
효율적으로 스트리밍되지 않음.

시도한 해결책 (실패):
1. VirtualGL 설치 → Ubuntu 24.04 의존성 충돌
2. 환경변수 조정 (KIT_USE_EGL, OMNI_KIT_FORCE_VULKAN) → 효과 없음
  """ .

# ============================================
# 3. 솔루션 1: WebRTC 스트리밍 (권장)
# ============================================

:webrtc_streaming_solution a :ConfigurationSolution ;
  :id "SOL-003-A" ;
  :name "WebRTC 스트리밍" ;
  :status "PLANNED" ;
  :successRate 0.9 ;
  :applicationScope "GLOBAL" ;
  :priority 1 ;
  
  :description """
Isaac Sim Omniverse Streaming 기능 사용.

장점:
- 브라우저 접속만으로 가능
- 60fps 지원
- 저지연 (<100ms)
- 방화벽 친화적 (WebRTC)

단점:
- 초기 설정 필요
- 네트워크 대역폭 요구
- 브라우저 호환성 확인 필요

설정 방법 (예정):
1. Isaac Sim에서 Streaming 확장 활성화
2. WebRTC 서버 시작
3. 브라우저에서 접속
  """ ;
  
  :solves :remote_gui_rendering_problem .

# ============================================
# 4. 솔루션 2: NICE DCV
# ============================================

:nice_dcv_solution a :ConfigurationSolution ;
  :id "SOL-003-B" ;
  :name "NICE DCV 원격 데스크톱" ;
  :status "ALTERNATIVE" ;
  :successRate 0.85 ;
  :applicationScope "GLOBAL" ;
  :priority 2 ;
  
  :description """
AWS NICE DCV를 사용한 고성능 원격 데스크톱.

장점:
- 저지연 원격 데스크톱
- GPU 가속 지원
- 4K 해상도 지원
- AWS 최적화

단점:
- 별도 설치 필요
- 상용 라이선스 (개인 무료)
- AWS 외부 환경에서 일부 제약

설정 방법:
1. NICE DCV 서버 설치
2. 세션 시작
3. 클라이언트로 접속
  """ ;
  
  :solves :remote_gui_rendering_problem .

# ============================================
# 5. 솔루션 3: TurboVNC
# ============================================

:turbovnc_solution a :ConfigurationSolution ;
  :id "SOL-003-C" ;
  :name "TurboVNC + VirtualGL" ;
  :status "FALLBACK" ;
  :successRate 0.6 ;
  :applicationScope "CONDITIONAL" ;
  :priority 3 ;
  
  :description """
VNC 기반 원격 렌더링.

장점:
- 오픈소스
- 범용성
- 설정 간단

단점:
- 성능 제한적 (30fps)
- 압축으로 인한 화질 저하
- 지연 시간 높음

권장 사항:
- WebRTC 불가 시 차선책으로 고려
- 디버깅 용도로만 사용
  """ ;
  
  :solves :remote_gui_rendering_problem .

# ============================================
# 6. 대안: Headless 모드 + 로깅/메트릭
# ============================================

:headless_with_logging_solution a :DocumentationSolution ;
  :id "SOL-003-D" ;
  :name "Headless 모드 + 로깅/메트릭 수집" ;
  :status "IMPLEMENTED" ;
  :successRate 1.0 ;
  :applicationScope "GLOBAL" ;
  :priority 1 ;
  
  :description """
GUI 대신 Headless 모드로 실행하고 로깅/메트릭으로 모니터링.

장점:
- 네트워크 독립적
- 리소스 효율적
- 안정적

단점:
- 시각적 확인 불가
- 디버깅 시 불편

권장 사용:
- 학습/실험: Headless 모드
- 디버깅/검증: WebRTC 스트리밍
  """ ;
  
  :solves :remote_gui_rendering_problem .

# ============================================
# 7. 관련 문서
# ============================================

:lessons_learned_gui_section a :Document ;
  :filePath "/home/roarm_m3/roarm_isaac_clean/docs/LESSONS_LEARNED.md" ;
  :name "교훈 - 원격 GUI 문제" ;
  :description "LESSONS_LEARNED.md의 '문제 2: 원격 GUI 렌더링 실패' 섹션" ;
  :documents :remote_gui_rendering_problem .

# ============================================
# 8. 권장 솔루션 순위
# ============================================

# 1순위: Headless 모드 + 로깅 (현재 사용)
# 2순위: WebRTC 스트리밍 (필요 시 구축)
# 3순위: NICE DCV (AWS 환경 시)
# 4순위: TurboVNC (최후 수단)

# ============================================
# 9. 현재 상태
# ============================================

# 상태: OPEN (Headless 모드로 우회 중)
# 우선순위: MEDIUM (학습에는 영향 없음)
# 계획: Phase 3에서 WebRTC 설정 검토
