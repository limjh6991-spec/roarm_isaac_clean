# v3.7.3 실험 최종 요약

**날짜**: 2025년 10월 22일  
**실험 목표**: Joint limits 확장 (±90° → ±180°) + Gripper width bug 수정

---

## 🎯 실험 결과: ❌ **실패**

### 성능 비교 (v3.7.2 → v3.7.3)

| 지표 | v3.7.2 | v3.7.3 | 변화 |
|------|--------|--------|------|
| **REACH rate** | 36.2% | 11.0% | 🔴 **-69%** |
| **최소 거리** | 5.5cm | 28cm | 🔴 **+409%** |
| **GRIP** | 0% | 0% | 🟡 동일 |
| **학습 시간** | 4분 | 4.3분 | 같음 |

---

## 🔍 원인 분석

### ❌ **주요 문제: Joint Limits 과도 확장**

```
±90° (1.57 rad) → ±180° (3.14 rad)
```

**영향**:
- 탐색 공간 **4배 증가**
- 100K steps로는 탐색 부족
- Local minimum에 빠짐 (28-32cm에 고정)

### ✅ **성공한 부분: Gripper Width Bug 수정**

```python
# ❌ 이전 (bug)
obs[23] = 0.0000  # 항상 0

# ✅ 수정 (v3.7.3)
obs[23] = 0.0651  # 실제 gripper width 전달
```

**검증**: tracked_width와 obs[23] 완벽 일치 확인 ✅

---

## 💡 결론

### 판단
- Joint limits 확장이 **역효과**
- 물리적 자유도 ↑ ≠ 학습 성능 ↑
- Gripper bug fix는 **성공** (향후 활용 가능)

### 교훈
1. 탐색 공간과 학습 시간의 균형 중요
2. 변수 하나씩 변경하며 검증 필요
3. Baseline 대비 성능 하락 시 즉시 복귀

---

## 🚀 다음 단계: v3.7.4 권장

### 전략: **v3.7.2 base + Gripper bug fix만 적용**

```python
# v3.7.4 설정
joint_limits = ±90°  # 검증된 범위 (v3.7.2)
gripper_width_fix = True  # v3.7.3의 성공한 bug fix
timesteps = 100K
```

### 예상 결과
- ✅ REACH: 36% (v3.7.2 수준)
- ✅ GRIP: 첫 달성 가능 (bug fix 덕분)
- ✅ 학습 시간: ~4분
- ✅ 성공 확률: 높음

---

## 📋 체크리스트

### 완료된 작업 ✅
- [x] Joint limits ±180° URDF 수정
- [x] Environment 코드 업데이트
- [x] Gripper width bug 수정
- [x] 100K steps 학습 완료
- [x] 성능 분석 및 비교

### 다음 작업 🎯
- [ ] URDF joint limits ±90°로 복귀
- [ ] v3.7.4 학습 시작 (gripper fix 유지)
- [ ] GRIP milestone 달성 여부 확인
- [ ] 성공 시 curriculum 진행

---

## 📂 파일 위치

### v3.7.3 (현재)
- 모델: `logs/rl_training_curriculum/final_model/`
- 로그: `logs/training_v3.7.3_bugfix.log`
- 분석: `logs/v3.7.3_progress_summary.md`

### v3.7.2 (백업)
- 모델: `logs/rl_training_curriculum/final_model_v3.7.2_backup/`

---

## ⚡ Quick Start (v3.7.4)

```bash
# 1. URDF 복원 (±90°)
# joint_2, 3, 4, 6: -1.57 ~ 1.57

# 2. Environment 복원
# step() joint limits: [-3.14, -1.57, -1.57, -1.57, -3.14, -1.57, 0, 0]

# 3. 캐시 삭제
find . -type d -name "__pycache__" -exec rm -rf {} + 2>/dev/null
find . -name "*.pyc" -delete

# 4. 학습 시작
~/isaacsim/python.sh scripts/rl/train_dense_reward.py --timesteps 100000
```

---

## 📊 상세 분석

전체 분석: `logs/v3.7.3_progress_summary.md` 참조

---

**작성일**: 2025-10-22 21:25  
**작성자**: GitHub Copilot  
**버전**: v3.7.3 Final Report
